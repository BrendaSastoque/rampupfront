pipeline{
	agent any
	tools{
		nodejs "node"	
	}
	stages{
		stage('Build'){
			steps{
				script{
				frontimage = docker.build("brendasastoque/frontimg")
				}
				echo "Built"
			}     
		}
		stage ('Test'){
			steps {
				script{
					frontimage.inside{
					echo "Tests passed"
					}
				}
				echo "Tested"
			}
		}
		stage ('Deploy image'){
			steps {
				script {
					docker.withRegistry('https://registry.hub.docker.com','docker-hub-credentials'){
						frontimage.push("${env.BUILD_NUMBER}")
						frontimage.push("latest")
					}
				}
			}
		}
		stage ('Deploy'){
			steps {
				echo "Deploying"
			}
		}	
	}
}

